language: node_js

cache: true

env:
  global:
    - NODE_ENV=development
    - XUNIT_FILE=shippable/testresults/result.xml
    - PROJECT=aeg-sdk

branches:
  only:
    - master

before_install:
  - shippable_retry npm install

script:
  - npm run build

after_script:
  - ./node_modules/.bin/istanbul cover --dir  shippable/codecoverage/ _mocha -- --recursive test/unit/
  - ./node_modules/.bin/istanbul report cobertura --dir  shippable/codecoverage/